<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>7-index</title>

  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
</head>

<body>

<script type="application/javascript">

  function createSearchForm() {
    const form = $("<form>").append(
      $("<input>").attr("type", "text"),
      $("<input>").attr("type", "submit").val("Submit")
    );

    const list = $("<ul>");

    form.submit(function (event) {
      event.preventDefault();
      const search = $("input[type='text']").val();
      queryWikipedia(search);
    });

    $("body").append(form, list);
  }

  function addNewArticle(id, title, snippet) {
    const item = $("<li>").append(
      $("<p>").append(
        $("<span>").text(id + " - "),
        $("<b>").text(title)
      ),
      $("<p>").html(snippet)
    );

    $("ul").append(item);
  }

  function queryWikipedia(search) {
    $.ajax({
      url: "https://en.wikipedia.org/w/api.php",
      data: {
        action: "query",
        list: "search",
        srsearch: search,
        format: "json",
        origin: "*"
      },
      success: function (data) {
        $("ul").empty();
        data.query.search.forEach(function (result) {
          addNewArticle(result.pageid, result.title, result.snippet);
        });
      }
    });
  }

  $(document).ready(function () {
    createSearchForm();
  });

</script>

</body>
</html>
